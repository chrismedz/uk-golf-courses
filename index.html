<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>UK Golf Directory – Find Courses Near You</title>
  <meta name="description" content="Discover and filter UK golf courses by county, par, length and difficulty. View details, flyover videos, maps and fees.">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="logo" href="index.html">UK Golf Directory</a>
      <nav class="top-nav">
        <a href="courses.html">Full A–Z Directory</a>
      </nav>
    </div>
  </header>

  <main>
    <!-- Hero -->
    <section class="hero">
      <div class="container">
        <h1>Find Your Perfect UK Golf Course</h1>
        <p>Filter by county, par, length and difficulty — then explore rich course pages with maps, fees, and flyover videos.</p>
      </div>
    </section>

    <!-- Ad Slot -->
    <div class="ad ad-leaderboard">
      <span>Ad space – 728×90</span>
    </div>

    <!-- Map -->
    <section class="map-section container">
      <h2>Explore the Map</h2>
      <div id="map" class="map"></div>
    </section>

    <!-- Filters -->
    <section class="filters container">
      <h2>Filter Courses</h2>
      <div class="filter-grid">
        <select id="filter-county">
          <option value="">All Counties</option>
        </select>
        <select id="filter-par">
          <option value="">All Pars</option>
          <option value="3">Par 3</option>
          <option value="4">Par 4</option>
          <option value="5">Par 5</option>
        </select>
        <select id="filter-length">
          <option value="">Any Length</option>
          <option value="short">Up to 5,500 yds</option>
          <option value="medium">5,500 – 6,500 yds</option>
          <option value="long">6,500+ yds</option>
        </select>
        <select id="filter-difficulty">
          <option value="">Any Difficulty</option>
          <option value="1">★ Easy</option>
          <option value="2">★★ Fair</option>
          <option value="3">★★★ Moderate</option>
          <option value="4">★★★★ Challenging</option>
          <option value="5">★★★★★ Hard</option>
        </select>
      </div>
    </section>

    <!-- Results -->
    <section class="results container">
      <h2>Featured Courses</h2>
      <div id="results-grid" class="grid"></div>
    </section>

    <!-- CTA to A–Z -->
    <section class="cta container">
      <p>Want to browse them all?</p>
      <a href="courses.html" class="btn">View Full A–Z Directory</a>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container footer-inner">
      <div>© 2025 UK Golf Directory</div>
      <nav class="footer-nav">
        <a href="index.html">Home</a>
        <a href="courses.html">All Courses</a>
      </nav>
    </div>
  </footer>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="courses.js"></script>
  <script>
    // Init Map
    const map = L.map("map", { scrollWheelZoom:false }).setView([54.5, -3], 6);
    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
      attribution: "&copy; OpenStreetMap contributors"
    }).addTo(map);

    // Populate markers from courses.js
    courses.forEach(c => {
      if (c.lat && c.lng) {
        L.marker([c.lat, c.lng]).addTo(map).bindPopup(
          `<b>${c.name}</b><br><a href="course.html?id=${c.id}">View Details</a>`
        );
      }
    });

    // Fill county filter
    const countySet = new Set(courses.map(c => c.county).filter(Boolean));
    const countySelect = document.getElementById("filter-county");
    countySet.forEach(c => {
      const opt = document.createElement("option");
      opt.value = c; opt.textContent = c;
      countySelect.appendChild(opt);
    });

    // Render featured courses
    const resultsGrid = document.getElementById("results-grid");
    function renderCourses(list) {
      resultsGrid.innerHTML = "";
      list.forEach(c => {
        const div = document.createElement("div");
        div.className = "course-card";
        div.innerHTML = `
          <img src="${c.image}" alt="${c.name}">
          <h3>${c.name}</h3>
          <p>${c.county}</p>
          ${c.youtube ? `<iframe src="https://www.youtube.com/embed/${c.youtube}" frameborder="0" allowfullscreen></iframe>` : ""}
          <a href="course.html?id=${c.id}" class="btn-small">View Course</a>
        `;
        resultsGrid.appendChild(div);
      });
    }
    renderCourses(courses.slice(0, 10)); // featured

    // Filtering logic
    function applyFilters() {
      const county = countySelect.value;
      const par = document.getElementById("filter-par").value;
      const length = document.getElementById("filter-length").value;
      const diff = document.getElementById("filter-difficulty").value;

      let list = courses;
      if (county) list = list.filter(c => c.county === county);
      if (par) list = list.filter(c => String(c.par) === par);
      if (length) {
        list = list.filter(c => {
          if (!c.length) return false;
          if (length === "short") return c.length <= 5500;
          if (length === "medium") return c.length > 5500 && c.length <= 6500;
          if (length === "long") return c.length > 6500;
        });
      }
      if (diff) list = list.filter(c => String(c.difficulty) === diff);

      renderCourses(list.length ? list : []);
    }
    document.querySelectorAll(".filters select").forEach(sel => {
      sel.addEventListener("change", applyFilters);
    });
  </script>
</body>
</html>
